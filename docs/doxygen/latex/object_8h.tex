\hypertarget{object_8h}{}\section{include/tvm/runtime/object.h File Reference}
\label{object_8h}\index{include/tvm/runtime/object.\+h@{include/tvm/runtime/object.\+h}}


A managed object in the T\+VM runtime.  


{\ttfamily \#include $<$dmlc/logging.\+h$>$}\\*
{\ttfamily \#include $<$tvm/runtime/c\+\_\+runtime\+\_\+api.\+h$>$}\\*
{\ttfamily \#include $<$type\+\_\+traits$>$}\\*
{\ttfamily \#include $<$string$>$}\\*
{\ttfamily \#include $<$utility$>$}\\*
{\ttfamily \#include $<$atomic$>$}\\*
Include dependency graph for object.\+h\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{object_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{object_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classtvm_1_1runtime_1_1Object}{tvm\+::runtime\+::\+Object}
\begin{DoxyCompactList}\small\item\em base class of all object containers. \end{DoxyCompactList}\item 
class \hyperlink{classtvm_1_1runtime_1_1ObjectPtr}{tvm\+::runtime\+::\+Object\+Ptr$<$ T $>$}
\begin{DoxyCompactList}\small\item\em A custom smart pointer for \hyperlink{classtvm_1_1runtime_1_1Object}{Object}. \end{DoxyCompactList}\item 
class \hyperlink{classtvm_1_1runtime_1_1ObjectRef}{tvm\+::runtime\+::\+Object\+Ref}
\begin{DoxyCompactList}\small\item\em Base class of all object reference. \end{DoxyCompactList}\item 
struct \hyperlink{structtvm_1_1runtime_1_1ObjectHash}{tvm\+::runtime\+::\+Object\+Hash}
\begin{DoxyCompactList}\small\item\em \hyperlink{classtvm_1_1runtime_1_1ObjectRef}{Object\+Ref} hash functor. \end{DoxyCompactList}\item 
struct \hyperlink{structtvm_1_1runtime_1_1ObjectEqual}{tvm\+::runtime\+::\+Object\+Equal}
\begin{DoxyCompactList}\small\item\em \hyperlink{classtvm_1_1runtime_1_1ObjectRef}{Object\+Ref} equal functor. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
 \hyperlink{namespacetvm}{tvm}
\item 
 \hyperlink{namespacetvm_1_1runtime}{tvm\+::runtime}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{object_8h_a5f80f888f69ef72c51ba04cac65d033c}{T\+V\+M\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+A\+T\+O\+M\+I\+C\+\_\+\+R\+E\+F\+\_\+\+C\+O\+U\+N\+T\+ER}~1
\begin{DoxyCompactList}\small\item\em Whether or not use atomic reference counter. If the reference counter is not atomic, an object cannot be owned by multiple threads. We can, however, move an object across threads. \end{DoxyCompactList}\item 
\#define \hyperlink{object_8h_ac2b7418e9549512b5db0126cf2a716f1}{T\+V\+M\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+B\+A\+S\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+I\+N\+FO}(Type\+Name,  Parent\+Type)
\begin{DoxyCompactList}\small\item\em helper macro to declare a base object type that can be inheritated. \end{DoxyCompactList}\item 
\#define \hyperlink{object_8h_a3aea9b3f65aeb9150c0fa7800e5573c6}{T\+V\+M\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+F\+I\+N\+A\+L\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+I\+N\+FO}(Type\+Name,  Parent\+Type)
\begin{DoxyCompactList}\small\item\em helper macro to declare type information in a final class. \end{DoxyCompactList}\item 
\#define \hyperlink{object_8h_a744c2fdb7ff7dc43070c1841a5873c84}{T\+V\+M\+\_\+\+A\+T\+T\+R\+I\+B\+U\+T\+E\+\_\+\+U\+N\+U\+S\+ED}
\begin{DoxyCompactList}\small\item\em helper macro to supress unused warning \end{DoxyCompactList}\item 
\#define \hyperlink{object_8h_a7b72d9155e59e0d4dcdf674c90e64c7e}{T\+V\+M\+\_\+\+S\+T\+R\+\_\+\+C\+O\+N\+C\+A\+T\+\_\+}(\+\_\+\+\_\+x,  \+\_\+\+\_\+y)~\+\_\+\+\_\+x\#\#\+\_\+\+\_\+y
\item 
\#define \hyperlink{object_8h_a73bf3e57b9d7a6e0dd55d901321d01ed}{T\+V\+M\+\_\+\+S\+T\+R\+\_\+\+C\+O\+N\+C\+AT}(\+\_\+\+\_\+x,  \+\_\+\+\_\+y)~\hyperlink{object_8h_a7b72d9155e59e0d4dcdf674c90e64c7e}{T\+V\+M\+\_\+\+S\+T\+R\+\_\+\+C\+O\+N\+C\+A\+T\+\_\+}(\+\_\+\+\_\+x, \+\_\+\+\_\+y)
\item 
\#define \hyperlink{object_8h_ac63db332fce1a32738566c8880f0d425}{T\+V\+M\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+G\+\_\+\+V\+A\+R\+\_\+\+D\+EF}~static \hyperlink{object_8h_a744c2fdb7ff7dc43070c1841a5873c84}{T\+V\+M\+\_\+\+A\+T\+T\+R\+I\+B\+U\+T\+E\+\_\+\+U\+N\+U\+S\+ED} uint32\+\_\+t \+\_\+\+\_\+make\+\_\+\+Object\+\_\+tid
\item 
\#define \hyperlink{object_8h_ae1029068e5e7608770038906ca30db09}{T\+V\+M\+\_\+\+R\+E\+G\+I\+S\+T\+E\+R\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+T\+Y\+PE}(Type\+Name)
\begin{DoxyCompactList}\small\item\em Helper macro to register the object type to runtime. Makes sure that the runtime type table is correctly populated. \end{DoxyCompactList}\item 
\#define \hyperlink{object_8h_ac6e7295a4999e2c8e4a2c990beca887a}{T\+V\+M\+\_\+\+D\+E\+F\+I\+N\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+F\+\_\+\+M\+E\+T\+H\+O\+DS}(Type\+Name,  Parent\+Type,  Object\+Name)
\item 
\#define \hyperlink{object_8h_aaaa3dc5b6dc33f84b2d28f9a81267212}{T\+V\+M\+\_\+\+D\+E\+F\+I\+N\+E\+\_\+\+M\+U\+T\+A\+B\+L\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+F\+\_\+\+M\+E\+T\+H\+O\+DS}(Type\+Name,  Parent\+Type,  Object\+Name)
\item 
\#define \hyperlink{object_8h_af8330e3864503fb7c4133ae4d48fe4a2}{T\+V\+M\+\_\+\+D\+E\+F\+I\+N\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+F\+\_\+\+C\+O\+W\+\_\+\+M\+E\+T\+H\+OD}(Object\+Name)
\begin{DoxyCompactList}\small\item\em Define Copy\+On\+Write function in an Object\+Ref. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{namespacetvm_1_1runtime_a7d395cd724f727e86358b73b5cdeb4e4}{tvm\+::runtime\+::\+Type\+Index} \{ \\*
\hyperlink{namespacetvm_1_1runtime_a7d395cd724f727e86358b73b5cdeb4e4a1b73281b45b997205b5082ba53300d6a}{tvm\+::runtime\+::k\+Root} = 0, 
\hyperlink{namespacetvm_1_1runtime_a7d395cd724f727e86358b73b5cdeb4e4a626309e16a9075cc8009c93adf3fbc9f}{tvm\+::runtime\+::k\+Closure} = 1, 
\hyperlink{namespacetvm_1_1runtime_a7d395cd724f727e86358b73b5cdeb4e4a86d9bc218c0f54443cbbe3fcc5c8382e}{tvm\+::runtime\+::k\+V\+M\+A\+DT} = 2, 
\hyperlink{namespacetvm_1_1runtime_a7d395cd724f727e86358b73b5cdeb4e4af5474ebdbaaa19e977334eefa4bbd611}{tvm\+::runtime\+::k\+Runtime\+Module} = 3, 
\\*
\hyperlink{namespacetvm_1_1runtime_a7d395cd724f727e86358b73b5cdeb4e4a548302094bc9afb6bb14dc2a283c1014}{tvm\+::runtime\+::k\+Static\+Index\+End}, 
\hyperlink{namespacetvm_1_1runtime_a7d395cd724f727e86358b73b5cdeb4e4a633f5947b3a79c577b538cec7528f5aa}{tvm\+::runtime\+::k\+Dynamic} = k\+Static\+Index\+End
 \}\begin{DoxyCompactList}\small\item\em list of the type index. \end{DoxyCompactList}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename Relay\+Ref\+Type , typename Object\+Type $>$ }\\Relay\+Ref\+Type \hyperlink{namespacetvm_1_1runtime_aa4a97de4fefd23aa5942c6a545544a05}{tvm\+::runtime\+::\+Get\+Ref} (const Object\+Type $\ast$ptr)
\begin{DoxyCompactList}\small\item\em Get a reference type from a raw object ptr type. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Sub\+Ref , typename Base\+Ref $>$ }\\Sub\+Ref \hyperlink{namespacetvm_1_1runtime_a756a222aed384e208f32d35d3412c918}{tvm\+::runtime\+::\+Downcast} (Base\+Ref ref)
\begin{DoxyCompactList}\small\item\em Downcast a base reference type to a more specific type. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Base\+Type , typename Object\+Type $>$ }\\Object\+Ptr$<$ Base\+Type $>$ \hyperlink{namespacetvm_1_1runtime_a46bcf7948293194c5b9c7db91da96381}{tvm\+::runtime\+::\+Get\+Object\+Ptr} (Object\+Type $\ast$ptr)
\begin{DoxyCompactList}\small\item\em Get an object ptr type from a raw object ptr. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Relay\+Ref\+Type , typename Obj\+Type $>$ }\\Relay\+Ref\+Type \hyperlink{namespacetvm_1_1runtime_ad4c790ddcf38a1ef9800466cd0c1a0a2}{tvm\+::runtime\+::\+Get\+Ref} (const Obj\+Type $\ast$ptr)
\item 
{\footnotesize template$<$typename Base\+Type , typename Obj\+Type $>$ }\\Object\+Ptr$<$ Base\+Type $>$ \hyperlink{namespacetvm_1_1runtime_ac2d903012aff56c2bd54ff66f48450c3}{tvm\+::runtime\+::\+Get\+Object\+Ptr} (Obj\+Type $\ast$ptr)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
A managed object in the T\+VM runtime. 



\subsection{Macro Definition Documentation}
\index{object.\+h@{object.\+h}!T\+V\+M\+\_\+\+A\+T\+T\+R\+I\+B\+U\+T\+E\+\_\+\+U\+N\+U\+S\+ED@{T\+V\+M\+\_\+\+A\+T\+T\+R\+I\+B\+U\+T\+E\+\_\+\+U\+N\+U\+S\+ED}}
\index{T\+V\+M\+\_\+\+A\+T\+T\+R\+I\+B\+U\+T\+E\+\_\+\+U\+N\+U\+S\+ED@{T\+V\+M\+\_\+\+A\+T\+T\+R\+I\+B\+U\+T\+E\+\_\+\+U\+N\+U\+S\+ED}!object.\+h@{object.\+h}}
\subsubsection[{\texorpdfstring{T\+V\+M\+\_\+\+A\+T\+T\+R\+I\+B\+U\+T\+E\+\_\+\+U\+N\+U\+S\+ED}{TVM_ATTRIBUTE_UNUSED}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+V\+M\+\_\+\+A\+T\+T\+R\+I\+B\+U\+T\+E\+\_\+\+U\+N\+U\+S\+ED}\hypertarget{object_8h_a744c2fdb7ff7dc43070c1841a5873c84}{}\label{object_8h_a744c2fdb7ff7dc43070c1841a5873c84}


helper macro to supress unused warning 

\index{object.\+h@{object.\+h}!T\+V\+M\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+B\+A\+S\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+I\+N\+FO@{T\+V\+M\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+B\+A\+S\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+I\+N\+FO}}
\index{T\+V\+M\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+B\+A\+S\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+I\+N\+FO@{T\+V\+M\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+B\+A\+S\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+I\+N\+FO}!object.\+h@{object.\+h}}
\subsubsection[{\texorpdfstring{T\+V\+M\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+B\+A\+S\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+I\+N\+FO}{TVM_DECLARE_BASE_OBJECT_INFO}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+V\+M\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+B\+A\+S\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+I\+N\+FO(
\begin{DoxyParamCaption}
\item[{}]{Type\+Name, }
\item[{}]{Parent\+Type}
\end{DoxyParamCaption}
)}\hypertarget{object_8h_ac2b7418e9549512b5db0126cf2a716f1}{}\label{object_8h_ac2b7418e9549512b5db0126cf2a716f1}
{\bfseries Value\+:}
\begin{DoxyCode}
static\_assert(!ParentType::\_type\_final, \textcolor{stringliteral}{"ParentObj maked as final"});  \(\backslash\)
  static uint32\_t RuntimeTypeIndex()  \{                                 \(\backslash\)
    if (TypeName::\_type\_index != ::\hyperlink{namespacetvm_1_1runtime_a7d395cd724f727e86358b73b5cdeb4e4a633f5947b3a79c577b538cec7528f5aa}{tvm::runtime::TypeIndex::kDynamic}) \{ \(\backslash\)
      return TypeName::\_type\_index;                                     \(\backslash\)
    \}                                                                   \(\backslash\)
    return \_GetOrAllocRuntimeTypeIndex();                               \(\backslash\)
  \}                                                                     \(\backslash\)
  static uint32\_t \_GetOrAllocRuntimeTypeIndex()  \{                      \(\backslash\)
    static uint32\_t tidx = Object::GetOrAllocRuntimeTypeIndex(          \(\backslash\)
        TypeName::\_type\_key,                                            \(\backslash\)
        TypeName::\_type\_index,                                          \(\backslash\)
        ParentType::\_GetOrAllocRuntimeTypeIndex(),                      \(\backslash\)
        TypeName::\_type\_child\_slots,                                    \(\backslash\)
        TypeName::\_type\_child\_slots\_can\_overflow);                      \(\backslash\)
    return tidx;                                                        \(\backslash\)
  \}                                                                     \(\backslash\)
\end{DoxyCode}


helper macro to declare a base object type that can be inheritated. 


\begin{DoxyParams}{Parameters}
{\em Type\+Name} & The name of the current type. \\
\hline
{\em Parent\+Type} & The name of the Parent\+Type \\
\hline
\end{DoxyParams}
\index{object.\+h@{object.\+h}!T\+V\+M\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+F\+I\+N\+A\+L\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+I\+N\+FO@{T\+V\+M\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+F\+I\+N\+A\+L\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+I\+N\+FO}}
\index{T\+V\+M\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+F\+I\+N\+A\+L\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+I\+N\+FO@{T\+V\+M\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+F\+I\+N\+A\+L\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+I\+N\+FO}!object.\+h@{object.\+h}}
\subsubsection[{\texorpdfstring{T\+V\+M\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+F\+I\+N\+A\+L\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+I\+N\+FO}{TVM_DECLARE_FINAL_OBJECT_INFO}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+V\+M\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+F\+I\+N\+A\+L\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+I\+N\+FO(
\begin{DoxyParamCaption}
\item[{}]{Type\+Name, }
\item[{}]{Parent\+Type}
\end{DoxyParamCaption}
)}\hypertarget{object_8h_a3aea9b3f65aeb9150c0fa7800e5573c6}{}\label{object_8h_a3aea9b3f65aeb9150c0fa7800e5573c6}
{\bfseries Value\+:}
\begin{DoxyCode}
\textcolor{keyword}{static} \textcolor{keyword}{const} constexpr \textcolor{keywordtype}{bool} \_type\_final = \textcolor{keyword}{true};                       \(\backslash\)
  static \textcolor{keyword}{const} constexpr \textcolor{keywordtype}{int} \_type\_child\_slots = 0;                     \hyperlink{object_8h_ac2b7418e9549512b5db0126cf2a716f1}{\(\backslash\)}
\hyperlink{object_8h_ac2b7418e9549512b5db0126cf2a716f1}{  TVM\_DECLARE\_BASE\_OBJECT\_INFO}(TypeName, ParentType)                    \(\backslash\)
\end{DoxyCode}


helper macro to declare type information in a final class. 


\begin{DoxyParams}{Parameters}
{\em Type\+Name} & The name of the current type. \\
\hline
{\em Parent\+Type} & The name of the Parent\+Type \\
\hline
\end{DoxyParams}
\index{object.\+h@{object.\+h}!T\+V\+M\+\_\+\+D\+E\+F\+I\+N\+E\+\_\+\+M\+U\+T\+A\+B\+L\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+F\+\_\+\+M\+E\+T\+H\+O\+DS@{T\+V\+M\+\_\+\+D\+E\+F\+I\+N\+E\+\_\+\+M\+U\+T\+A\+B\+L\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+F\+\_\+\+M\+E\+T\+H\+O\+DS}}
\index{T\+V\+M\+\_\+\+D\+E\+F\+I\+N\+E\+\_\+\+M\+U\+T\+A\+B\+L\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+F\+\_\+\+M\+E\+T\+H\+O\+DS@{T\+V\+M\+\_\+\+D\+E\+F\+I\+N\+E\+\_\+\+M\+U\+T\+A\+B\+L\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+F\+\_\+\+M\+E\+T\+H\+O\+DS}!object.\+h@{object.\+h}}
\subsubsection[{\texorpdfstring{T\+V\+M\+\_\+\+D\+E\+F\+I\+N\+E\+\_\+\+M\+U\+T\+A\+B\+L\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+F\+\_\+\+M\+E\+T\+H\+O\+DS}{TVM_DEFINE_MUTABLE_OBJECT_REF_METHODS}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+V\+M\+\_\+\+D\+E\+F\+I\+N\+E\+\_\+\+M\+U\+T\+A\+B\+L\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+F\+\_\+\+M\+E\+T\+H\+O\+DS(
\begin{DoxyParamCaption}
\item[{}]{Type\+Name, }
\item[{}]{Parent\+Type, }
\item[{}]{Object\+Name}
\end{DoxyParamCaption}
)}\hypertarget{object_8h_aaaa3dc5b6dc33f84b2d28f9a81267212}{}\label{object_8h_aaaa3dc5b6dc33f84b2d28f9a81267212}
{\bfseries Value\+:}
\begin{DoxyCode}
TypeName() \{\}                                                         \(\backslash\)
  explicit TypeName(                                                    \(\backslash\)
      ::\hyperlink{classtvm_1_1runtime_1_1ObjectPtr}{tvm::runtime::ObjectPtr<::tvm::runtime::Object>} n)  
                  \(\backslash\)
      : ParentType(n) \{\}                                                \(\backslash\)
  ObjectName* operator->()\textcolor{keyword}{ const }\{                                      \(\backslash\)
    return \textcolor{keyword}{static\_cast<}ObjectName*\textcolor{keyword}{>}(data\_.get());                       \(\backslash\)
  \}                                                                     \(\backslash\)
  using ContainerType = ObjectName;
\end{DoxyCode}
\index{object.\+h@{object.\+h}!T\+V\+M\+\_\+\+D\+E\+F\+I\+N\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+F\+\_\+\+C\+O\+W\+\_\+\+M\+E\+T\+H\+OD@{T\+V\+M\+\_\+\+D\+E\+F\+I\+N\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+F\+\_\+\+C\+O\+W\+\_\+\+M\+E\+T\+H\+OD}}
\index{T\+V\+M\+\_\+\+D\+E\+F\+I\+N\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+F\+\_\+\+C\+O\+W\+\_\+\+M\+E\+T\+H\+OD@{T\+V\+M\+\_\+\+D\+E\+F\+I\+N\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+F\+\_\+\+C\+O\+W\+\_\+\+M\+E\+T\+H\+OD}!object.\+h@{object.\+h}}
\subsubsection[{\texorpdfstring{T\+V\+M\+\_\+\+D\+E\+F\+I\+N\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+F\+\_\+\+C\+O\+W\+\_\+\+M\+E\+T\+H\+OD}{TVM_DEFINE_OBJECT_REF_COW_METHOD}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+V\+M\+\_\+\+D\+E\+F\+I\+N\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+F\+\_\+\+C\+O\+W\+\_\+\+M\+E\+T\+H\+OD(
\begin{DoxyParamCaption}
\item[{}]{Object\+Name}
\end{DoxyParamCaption}
)}\hypertarget{object_8h_af8330e3864503fb7c4133ae4d48fe4a2}{}\label{object_8h_af8330e3864503fb7c4133ae4d48fe4a2}
{\bfseries Value\+:}
\begin{DoxyCode}
ObjectName* CopyOnWrite() \{                                           \(\backslash\)
      CHECK(data\_ != \textcolor{keyword}{nullptr});                                          \(\backslash\)
      if (!data\_.unique())  \{                                           \(\backslash\)
        auto n = make\_object<ObjectName>(*(operator->()));              \(\backslash\)
        ObjectPtr<Object>(std::move(n)).swap(data\_);                    \(\backslash\)
      \}                                                                 \(\backslash\)
      return \textcolor{keyword}{static\_cast<}ObjectName*\textcolor{keyword}{>}(data\_.get());                     \(\backslash\)
    \}
\end{DoxyCode}


Define Copy\+On\+Write function in an Object\+Ref. 


\begin{DoxyParams}{Parameters}
{\em Object\+Name} & The Type of the Node.\\
\hline
\end{DoxyParams}
Copy\+On\+Write will generate a unique copy of the internal node. The node will be copied if it is referenced by multiple places. The function returns the raw pointer to the node to allow modification of the content.


\begin{DoxyCode}
1 MyCOWObjectRef ref, ref2;
2 ref2 = ref;
3 ref.CopyOnWrite()->value = new\_value;
4 assert(ref2->value == old\_value);
5 assert(ref->value == new\_value);
\end{DoxyCode}
 \index{object.\+h@{object.\+h}!T\+V\+M\+\_\+\+D\+E\+F\+I\+N\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+F\+\_\+\+M\+E\+T\+H\+O\+DS@{T\+V\+M\+\_\+\+D\+E\+F\+I\+N\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+F\+\_\+\+M\+E\+T\+H\+O\+DS}}
\index{T\+V\+M\+\_\+\+D\+E\+F\+I\+N\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+F\+\_\+\+M\+E\+T\+H\+O\+DS@{T\+V\+M\+\_\+\+D\+E\+F\+I\+N\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+F\+\_\+\+M\+E\+T\+H\+O\+DS}!object.\+h@{object.\+h}}
\subsubsection[{\texorpdfstring{T\+V\+M\+\_\+\+D\+E\+F\+I\+N\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+F\+\_\+\+M\+E\+T\+H\+O\+DS}{TVM_DEFINE_OBJECT_REF_METHODS}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+V\+M\+\_\+\+D\+E\+F\+I\+N\+E\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+F\+\_\+\+M\+E\+T\+H\+O\+DS(
\begin{DoxyParamCaption}
\item[{}]{Type\+Name, }
\item[{}]{Parent\+Type, }
\item[{}]{Object\+Name}
\end{DoxyParamCaption}
)}\hypertarget{object_8h_ac6e7295a4999e2c8e4a2c990beca887a}{}\label{object_8h_ac6e7295a4999e2c8e4a2c990beca887a}
{\bfseries Value\+:}
\begin{DoxyCode}
TypeName() \{\}                                                         \(\backslash\)
  explicit TypeName(                                                    \(\backslash\)
      ::\hyperlink{classtvm_1_1runtime_1_1ObjectPtr}{tvm::runtime::ObjectPtr<::tvm::runtime::Object>} n)  
                  \(\backslash\)
      : ParentType(n) \{\}                                                \(\backslash\)
  const ObjectName* operator->()\textcolor{keyword}{ const }\{                                \(\backslash\)
    return \textcolor{keyword}{static\_cast<}\textcolor{keyword}{const }ObjectName*\textcolor{keyword}{>}(data\_.get());                 \(\backslash\)
  \}                                                                     \(\backslash\)
  using ContainerType = ObjectName;
\end{DoxyCode}
\index{object.\+h@{object.\+h}!T\+V\+M\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+A\+T\+O\+M\+I\+C\+\_\+\+R\+E\+F\+\_\+\+C\+O\+U\+N\+T\+ER@{T\+V\+M\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+A\+T\+O\+M\+I\+C\+\_\+\+R\+E\+F\+\_\+\+C\+O\+U\+N\+T\+ER}}
\index{T\+V\+M\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+A\+T\+O\+M\+I\+C\+\_\+\+R\+E\+F\+\_\+\+C\+O\+U\+N\+T\+ER@{T\+V\+M\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+A\+T\+O\+M\+I\+C\+\_\+\+R\+E\+F\+\_\+\+C\+O\+U\+N\+T\+ER}!object.\+h@{object.\+h}}
\subsubsection[{\texorpdfstring{T\+V\+M\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+A\+T\+O\+M\+I\+C\+\_\+\+R\+E\+F\+\_\+\+C\+O\+U\+N\+T\+ER}{TVM_OBJECT_ATOMIC_REF_COUNTER}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+V\+M\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+A\+T\+O\+M\+I\+C\+\_\+\+R\+E\+F\+\_\+\+C\+O\+U\+N\+T\+ER~1}\hypertarget{object_8h_a5f80f888f69ef72c51ba04cac65d033c}{}\label{object_8h_a5f80f888f69ef72c51ba04cac65d033c}


Whether or not use atomic reference counter. If the reference counter is not atomic, an object cannot be owned by multiple threads. We can, however, move an object across threads. 

\index{object.\+h@{object.\+h}!T\+V\+M\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+G\+\_\+\+V\+A\+R\+\_\+\+D\+EF@{T\+V\+M\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+G\+\_\+\+V\+A\+R\+\_\+\+D\+EF}}
\index{T\+V\+M\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+G\+\_\+\+V\+A\+R\+\_\+\+D\+EF@{T\+V\+M\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+G\+\_\+\+V\+A\+R\+\_\+\+D\+EF}!object.\+h@{object.\+h}}
\subsubsection[{\texorpdfstring{T\+V\+M\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+G\+\_\+\+V\+A\+R\+\_\+\+D\+EF}{TVM_OBJECT_REG_VAR_DEF}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+V\+M\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+R\+E\+G\+\_\+\+V\+A\+R\+\_\+\+D\+EF~static {\bf T\+V\+M\+\_\+\+A\+T\+T\+R\+I\+B\+U\+T\+E\+\_\+\+U\+N\+U\+S\+ED} uint32\+\_\+t \+\_\+\+\_\+make\+\_\+\+Object\+\_\+tid}\hypertarget{object_8h_ac63db332fce1a32738566c8880f0d425}{}\label{object_8h_ac63db332fce1a32738566c8880f0d425}
\index{object.\+h@{object.\+h}!T\+V\+M\+\_\+\+R\+E\+G\+I\+S\+T\+E\+R\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+T\+Y\+PE@{T\+V\+M\+\_\+\+R\+E\+G\+I\+S\+T\+E\+R\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+T\+Y\+PE}}
\index{T\+V\+M\+\_\+\+R\+E\+G\+I\+S\+T\+E\+R\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+T\+Y\+PE@{T\+V\+M\+\_\+\+R\+E\+G\+I\+S\+T\+E\+R\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+T\+Y\+PE}!object.\+h@{object.\+h}}
\subsubsection[{\texorpdfstring{T\+V\+M\+\_\+\+R\+E\+G\+I\+S\+T\+E\+R\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+T\+Y\+PE}{TVM_REGISTER_OBJECT_TYPE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+V\+M\+\_\+\+R\+E\+G\+I\+S\+T\+E\+R\+\_\+\+O\+B\+J\+E\+C\+T\+\_\+\+T\+Y\+PE(
\begin{DoxyParamCaption}
\item[{}]{Type\+Name}
\end{DoxyParamCaption}
)}\hypertarget{object_8h_ae1029068e5e7608770038906ca30db09}{}\label{object_8h_ae1029068e5e7608770038906ca30db09}
{\bfseries Value\+:}
\begin{DoxyCode}
\hyperlink{object_8h_a73bf3e57b9d7a6e0dd55d901321d01ed}{TVM\_STR\_CONCAT}(\hyperlink{object_8h_ac63db332fce1a32738566c8880f0d425}{TVM\_OBJECT\_REG\_VAR\_DEF}, \_\_COUNTER\_\_) =                 \(\backslash\)
      TypeName::\_GetOrAllocRuntimeTypeIndex()
\end{DoxyCode}


Helper macro to register the object type to runtime. Makes sure that the runtime type table is correctly populated. 

Use this macro in the cc file for each terminal class. \index{object.\+h@{object.\+h}!T\+V\+M\+\_\+\+S\+T\+R\+\_\+\+C\+O\+N\+C\+AT@{T\+V\+M\+\_\+\+S\+T\+R\+\_\+\+C\+O\+N\+C\+AT}}
\index{T\+V\+M\+\_\+\+S\+T\+R\+\_\+\+C\+O\+N\+C\+AT@{T\+V\+M\+\_\+\+S\+T\+R\+\_\+\+C\+O\+N\+C\+AT}!object.\+h@{object.\+h}}
\subsubsection[{\texorpdfstring{T\+V\+M\+\_\+\+S\+T\+R\+\_\+\+C\+O\+N\+C\+AT}{TVM_STR_CONCAT}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+V\+M\+\_\+\+S\+T\+R\+\_\+\+C\+O\+N\+C\+AT(
\begin{DoxyParamCaption}
\item[{}]{\+\_\+\+\_\+x, }
\item[{}]{\+\_\+\+\_\+y}
\end{DoxyParamCaption}
)~{\bf T\+V\+M\+\_\+\+S\+T\+R\+\_\+\+C\+O\+N\+C\+A\+T\+\_\+}(\+\_\+\+\_\+x, \+\_\+\+\_\+y)}\hypertarget{object_8h_a73bf3e57b9d7a6e0dd55d901321d01ed}{}\label{object_8h_a73bf3e57b9d7a6e0dd55d901321d01ed}
\index{object.\+h@{object.\+h}!T\+V\+M\+\_\+\+S\+T\+R\+\_\+\+C\+O\+N\+C\+A\+T\+\_\+@{T\+V\+M\+\_\+\+S\+T\+R\+\_\+\+C\+O\+N\+C\+A\+T\+\_\+}}
\index{T\+V\+M\+\_\+\+S\+T\+R\+\_\+\+C\+O\+N\+C\+A\+T\+\_\+@{T\+V\+M\+\_\+\+S\+T\+R\+\_\+\+C\+O\+N\+C\+A\+T\+\_\+}!object.\+h@{object.\+h}}
\subsubsection[{\texorpdfstring{T\+V\+M\+\_\+\+S\+T\+R\+\_\+\+C\+O\+N\+C\+A\+T\+\_\+}{TVM_STR_CONCAT_}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+V\+M\+\_\+\+S\+T\+R\+\_\+\+C\+O\+N\+C\+A\+T\+\_\+(
\begin{DoxyParamCaption}
\item[{}]{\+\_\+\+\_\+x, }
\item[{}]{\+\_\+\+\_\+y}
\end{DoxyParamCaption}
)~\+\_\+\+\_\+x\#\#\+\_\+\+\_\+y}\hypertarget{object_8h_a7b72d9155e59e0d4dcdf674c90e64c7e}{}\label{object_8h_a7b72d9155e59e0d4dcdf674c90e64c7e}
