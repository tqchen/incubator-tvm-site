\hypertarget{classtvm_1_1ReflectionVTable}{}\section{tvm\+:\+:Reflection\+V\+Table Class Reference}
\label{classtvm_1_1ReflectionVTable}\index{tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}}


Virtual function table to support I\+R/\+A\+ST node reflection.  




{\ttfamily \#include $<$reflection.\+h$>$}



Collaboration diagram for tvm\+:\+:Reflection\+V\+Table\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=198pt]{classtvm_1_1ReflectionVTable__coll__graph}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classtvm_1_1ReflectionVTable_1_1Registry}{Registry}
\begin{DoxyCompactList}\small\item\em \hyperlink{classtvm_1_1ReflectionVTable_1_1Registry}{Registry} of a reflection table. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
typedef void($\ast$ \hyperlink{classtvm_1_1ReflectionVTable_a486eb682af89ac025c0db1f8f6045b95}{F\+Visit\+Attrs}) (Object $\ast$self, \hyperlink{classtvm_1_1AttrVisitor}{Attr\+Visitor} $\ast$visitor)
\begin{DoxyCompactList}\small\item\em Visitor function. \end{DoxyCompactList}\item 
typedef bool($\ast$ \hyperlink{classtvm_1_1ReflectionVTable_a656516c928f74d7b6345abd8c8f04358}{F\+S\+Equal\+Reduce}) (const Object $\ast$self, const Object $\ast$other, \hyperlink{classtvm_1_1SEqualReducer}{S\+Equal\+Reducer} equal)
\begin{DoxyCompactList}\small\item\em Equality comparison function. \end{DoxyCompactList}\item 
typedef void($\ast$ \hyperlink{classtvm_1_1ReflectionVTable_a08566817a33d96cd486a780afe88aad1}{F\+S\+Hash\+Reduce}) (const Object $\ast$self, \hyperlink{classtvm_1_1SHashReducer}{S\+Hash\+Reducer} hash\+\_\+reduce)
\begin{DoxyCompactList}\small\item\em Structural hash reduction function. \end{DoxyCompactList}\item 
typedef Object\+Ptr$<$ Object $>$($\ast$ \hyperlink{classtvm_1_1ReflectionVTable_adf61fde4dfac8d1cb59159db6722b335}{F\+Create}) (const std\+::string \&global\+\_\+key)
\begin{DoxyCompactList}\small\item\em creator function. \end{DoxyCompactList}\item 
typedef std\+::string($\ast$ \hyperlink{classtvm_1_1ReflectionVTable_abe09d73c5ea2c51f5cfa30471b8f89ef}{F\+Global\+Key}) (const Object $\ast$self)
\begin{DoxyCompactList}\small\item\em Global key function, only needed by global objects. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classtvm_1_1ReflectionVTable_a1a04983862e782c79b2d228a1e9158b9}{Visit\+Attrs} (Object $\ast$self, \hyperlink{classtvm_1_1AttrVisitor}{Attr\+Visitor} $\ast$visitor) const 
\begin{DoxyCompactList}\small\item\em Dispatch the Visit\+Attrs function. \end{DoxyCompactList}\item 
std\+::string \hyperlink{classtvm_1_1ReflectionVTable_ad91a5ee664b778c8d77ca0a5ebb209f8}{Get\+Global\+Key} (Object $\ast$self) const 
\begin{DoxyCompactList}\small\item\em Get global key of the object, if any. \end{DoxyCompactList}\item 
bool \hyperlink{classtvm_1_1ReflectionVTable_afca5e5c3d8d86bff3fb9503481727074}{S\+Equal\+Reduce} (const Object $\ast$self, const Object $\ast$other, \hyperlink{classtvm_1_1SEqualReducer}{S\+Equal\+Reducer} equal) const 
\begin{DoxyCompactList}\small\item\em Dispatch the S\+Equal\+Reduce function. \end{DoxyCompactList}\item 
void \hyperlink{classtvm_1_1ReflectionVTable_a8598da5b2df50186cbc4a66ffd539c23}{S\+Hash\+Reduce} (const Object $\ast$self, \hyperlink{classtvm_1_1SHashReducer}{S\+Hash\+Reducer} hash\+\_\+reduce) const 
\begin{DoxyCompactList}\small\item\em Dispatch the S\+Hash\+Reduce function. \end{DoxyCompactList}\item 
Object\+Ptr$<$ Object $>$ \hyperlink{classtvm_1_1ReflectionVTable_ab77d3b63f51e8596a67da6aa8cdd48ec}{Create\+Init\+Object} (const std\+::string \&type\+\_\+key, const std\+::string \&global\+\_\+key=\char`\"{}\char`\"{}) const 
\begin{DoxyCompactList}\small\item\em Create an initial object using default constructor by type\+\_\+key and global key. \end{DoxyCompactList}\item 
\hyperlink{classtvm_1_1runtime_1_1TVMRetValue}{runtime\+::\+T\+V\+M\+Ret\+Value} \hyperlink{classtvm_1_1ReflectionVTable_ae44960abd107dbdad04ab7a548db47e1}{Get\+Attr} (Object $\ast$self, const std\+::string \&attr\+\_\+name) const 
\begin{DoxyCompactList}\small\item\em Get an field object by the attr name. \end{DoxyCompactList}\item 
std\+::vector$<$ std\+::string $>$ \hyperlink{classtvm_1_1ReflectionVTable_ae8ea4f24e5b7e905c3a5f3f14b994707}{List\+Attr\+Names} (Object $\ast$self) const 
\begin{DoxyCompactList}\small\item\em List all the fields in the object. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T , typename Trait\+Name $>$ }\\\hyperlink{classtvm_1_1ReflectionVTable_1_1Registry}{Registry} \hyperlink{classtvm_1_1ReflectionVTable_a775a9d85f429302c05e06ddc64eb9456}{Register} ()
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classtvm_1_1ReflectionVTable}{Reflection\+V\+Table} $\ast$ \hyperlink{classtvm_1_1ReflectionVTable_acf555f668f940322ab7b3dea1a45bd95}{Global} ()
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Virtual function table to support I\+R/\+A\+ST node reflection. 

Functions are stored in columar manner. Each column is a vector indexed by Object\textquotesingle{}s type\+\_\+index. 

\subsection{Member Typedef Documentation}
\index{tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}!F\+Create@{F\+Create}}
\index{F\+Create@{F\+Create}!tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}}
\subsubsection[{\texorpdfstring{F\+Create}{FCreate}}]{\setlength{\rightskip}{0pt plus 5cm}typedef Object\+Ptr$<$Object$>$($\ast$ tvm\+::\+Reflection\+V\+Table\+::\+F\+Create) (const std\+::string \&global\+\_\+key)}\hypertarget{classtvm_1_1ReflectionVTable_adf61fde4dfac8d1cb59159db6722b335}{}\label{classtvm_1_1ReflectionVTable_adf61fde4dfac8d1cb59159db6722b335}


creator function. 


\begin{DoxyParams}{Parameters}
{\em global\+\_\+key} & Key that identifies a global single object. If this is not empty then F\+Global\+Key must be defined for the object. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The created function. 
\end{DoxyReturn}
\index{tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}!F\+Global\+Key@{F\+Global\+Key}}
\index{F\+Global\+Key@{F\+Global\+Key}!tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}}
\subsubsection[{\texorpdfstring{F\+Global\+Key}{FGlobalKey}}]{\setlength{\rightskip}{0pt plus 5cm}typedef std\+::string($\ast$ tvm\+::\+Reflection\+V\+Table\+::\+F\+Global\+Key) (const Object $\ast$self)}\hypertarget{classtvm_1_1ReflectionVTable_abe09d73c5ea2c51f5cfa30471b8f89ef}{}\label{classtvm_1_1ReflectionVTable_abe09d73c5ea2c51f5cfa30471b8f89ef}


Global key function, only needed by global objects. 


\begin{DoxyParams}{Parameters}
{\em node} & The node pointer. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
node The global key to the node. 
\end{DoxyReturn}
\index{tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}!F\+S\+Equal\+Reduce@{F\+S\+Equal\+Reduce}}
\index{F\+S\+Equal\+Reduce@{F\+S\+Equal\+Reduce}!tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}}
\subsubsection[{\texorpdfstring{F\+S\+Equal\+Reduce}{FSEqualReduce}}]{\setlength{\rightskip}{0pt plus 5cm}typedef bool($\ast$ tvm\+::\+Reflection\+V\+Table\+::\+F\+S\+Equal\+Reduce) (const Object $\ast$self, const Object $\ast$other, {\bf S\+Equal\+Reducer} equal)}\hypertarget{classtvm_1_1ReflectionVTable_a656516c928f74d7b6345abd8c8f04358}{}\label{classtvm_1_1ReflectionVTable_a656516c928f74d7b6345abd8c8f04358}


Equality comparison function. 

\index{tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}!F\+S\+Hash\+Reduce@{F\+S\+Hash\+Reduce}}
\index{F\+S\+Hash\+Reduce@{F\+S\+Hash\+Reduce}!tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}}
\subsubsection[{\texorpdfstring{F\+S\+Hash\+Reduce}{FSHashReduce}}]{\setlength{\rightskip}{0pt plus 5cm}typedef void($\ast$ tvm\+::\+Reflection\+V\+Table\+::\+F\+S\+Hash\+Reduce) (const Object $\ast$self, {\bf S\+Hash\+Reducer} hash\+\_\+reduce)}\hypertarget{classtvm_1_1ReflectionVTable_a08566817a33d96cd486a780afe88aad1}{}\label{classtvm_1_1ReflectionVTable_a08566817a33d96cd486a780afe88aad1}


Structural hash reduction function. 

\index{tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}!F\+Visit\+Attrs@{F\+Visit\+Attrs}}
\index{F\+Visit\+Attrs@{F\+Visit\+Attrs}!tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}}
\subsubsection[{\texorpdfstring{F\+Visit\+Attrs}{FVisitAttrs}}]{\setlength{\rightskip}{0pt plus 5cm}typedef void($\ast$ tvm\+::\+Reflection\+V\+Table\+::\+F\+Visit\+Attrs) (Object $\ast$self, {\bf Attr\+Visitor} $\ast$visitor)}\hypertarget{classtvm_1_1ReflectionVTable_a486eb682af89ac025c0db1f8f6045b95}{}\label{classtvm_1_1ReflectionVTable_a486eb682af89ac025c0db1f8f6045b95}


Visitor function. 

\begin{DoxyNote}{Note}
We use function pointer, instead of std\+::function to reduce the dispatch overhead as field visit does not need as much customization. 
\end{DoxyNote}


\subsection{Member Function Documentation}
\index{tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}!Create\+Init\+Object@{Create\+Init\+Object}}
\index{Create\+Init\+Object@{Create\+Init\+Object}!tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}}
\subsubsection[{\texorpdfstring{Create\+Init\+Object(const std\+::string \&type\+\_\+key, const std\+::string \&global\+\_\+key="""") const }{CreateInitObject(const std::string &type_key, const std::string &global_key="") const }}]{\setlength{\rightskip}{0pt plus 5cm}Object\+Ptr$<$Object$>$ tvm\+::\+Reflection\+V\+Table\+::\+Create\+Init\+Object (
\begin{DoxyParamCaption}
\item[{const std\+::string \&}]{type\+\_\+key, }
\item[{const std\+::string \&}]{global\+\_\+key = {\ttfamily \char`\"{}\char`\"{}}}
\end{DoxyParamCaption}
) const}\hypertarget{classtvm_1_1ReflectionVTable_ab77d3b63f51e8596a67da6aa8cdd48ec}{}\label{classtvm_1_1ReflectionVTable_ab77d3b63f51e8596a67da6aa8cdd48ec}


Create an initial object using default constructor by type\+\_\+key and global key. 


\begin{DoxyParams}{Parameters}
{\em type\+\_\+key} & The type key of the object. \\
\hline
{\em global\+\_\+key} & A global key that can be used to uniquely identify the object if any. \\
\hline
\end{DoxyParams}
\index{tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}!Get\+Attr@{Get\+Attr}}
\index{Get\+Attr@{Get\+Attr}!tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}}
\subsubsection[{\texorpdfstring{Get\+Attr(\+Object $\ast$self, const std\+::string \&attr\+\_\+name) const }{GetAttr(Object *self, const std::string &attr_name) const }}]{\setlength{\rightskip}{0pt plus 5cm}{\bf runtime\+::\+T\+V\+M\+Ret\+Value} tvm\+::\+Reflection\+V\+Table\+::\+Get\+Attr (
\begin{DoxyParamCaption}
\item[{Object $\ast$}]{self, }
\item[{const std\+::string \&}]{attr\+\_\+name}
\end{DoxyParamCaption}
) const}\hypertarget{classtvm_1_1ReflectionVTable_ae44960abd107dbdad04ab7a548db47e1}{}\label{classtvm_1_1ReflectionVTable_ae44960abd107dbdad04ab7a548db47e1}


Get an field object by the attr name. 


\begin{DoxyParams}{Parameters}
{\em self} & The pointer to the object. \\
\hline
{\em attr\+\_\+name} & The name of the field. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The corresponding attribute value. 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
This function will throw an exception if the object does not contain the field. 
\end{DoxyNote}
\index{tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}!Get\+Global\+Key@{Get\+Global\+Key}}
\index{Get\+Global\+Key@{Get\+Global\+Key}!tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}}
\subsubsection[{\texorpdfstring{Get\+Global\+Key(\+Object $\ast$self) const }{GetGlobalKey(Object *self) const }}]{\setlength{\rightskip}{0pt plus 5cm}std\+::string tvm\+::\+Reflection\+V\+Table\+::\+Get\+Global\+Key (
\begin{DoxyParamCaption}
\item[{Object $\ast$}]{self}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classtvm_1_1ReflectionVTable_ad91a5ee664b778c8d77ca0a5ebb209f8}{}\label{classtvm_1_1ReflectionVTable_ad91a5ee664b778c8d77ca0a5ebb209f8}


Get global key of the object, if any. 


\begin{DoxyParams}{Parameters}
{\em self} & The pointer to the object. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the global key if object has one, otherwise return empty string. 
\end{DoxyReturn}
\index{tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}!Global@{Global}}
\index{Global@{Global}!tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}}
\subsubsection[{\texorpdfstring{Global()}{Global()}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf Reflection\+V\+Table}$\ast$ tvm\+::\+Reflection\+V\+Table\+::\+Global (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{classtvm_1_1ReflectionVTable_acf555f668f940322ab7b3dea1a45bd95}{}\label{classtvm_1_1ReflectionVTable_acf555f668f940322ab7b3dea1a45bd95}
\begin{DoxyReturn}{Returns}
The global singleton. 
\end{DoxyReturn}
\index{tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}!List\+Attr\+Names@{List\+Attr\+Names}}
\index{List\+Attr\+Names@{List\+Attr\+Names}!tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}}
\subsubsection[{\texorpdfstring{List\+Attr\+Names(\+Object $\ast$self) const }{ListAttrNames(Object *self) const }}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$std\+::string$>$ tvm\+::\+Reflection\+V\+Table\+::\+List\+Attr\+Names (
\begin{DoxyParamCaption}
\item[{Object $\ast$}]{self}
\end{DoxyParamCaption}
) const}\hypertarget{classtvm_1_1ReflectionVTable_ae8ea4f24e5b7e905c3a5f3f14b994707}{}\label{classtvm_1_1ReflectionVTable_ae8ea4f24e5b7e905c3a5f3f14b994707}


List all the fields in the object. 

\begin{DoxyReturn}{Returns}
All the fields. 
\end{DoxyReturn}
\index{tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}!Register@{Register}}
\index{Register@{Register}!tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}}
\subsubsection[{\texorpdfstring{Register()}{Register()}}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T , typename Trait\+Name $>$ {\bf Reflection\+V\+Table\+::\+Registry} tvm\+::\+Reflection\+V\+Table\+::\+Register (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classtvm_1_1ReflectionVTable_a775a9d85f429302c05e06ddc64eb9456}{}\label{classtvm_1_1ReflectionVTable_a775a9d85f429302c05e06ddc64eb9456}
\index{tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}!S\+Equal\+Reduce@{S\+Equal\+Reduce}}
\index{S\+Equal\+Reduce@{S\+Equal\+Reduce}!tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}}
\subsubsection[{\texorpdfstring{S\+Equal\+Reduce(const Object $\ast$self, const Object $\ast$other, S\+Equal\+Reducer equal) const }{SEqualReduce(const Object *self, const Object *other, SEqualReducer equal) const }}]{\setlength{\rightskip}{0pt plus 5cm}bool tvm\+::\+Reflection\+V\+Table\+::\+S\+Equal\+Reduce (
\begin{DoxyParamCaption}
\item[{const Object $\ast$}]{self, }
\item[{const Object $\ast$}]{other, }
\item[{{\bf S\+Equal\+Reducer}}]{equal}
\end{DoxyParamCaption}
) const}\hypertarget{classtvm_1_1ReflectionVTable_afca5e5c3d8d86bff3fb9503481727074}{}\label{classtvm_1_1ReflectionVTable_afca5e5c3d8d86bff3fb9503481727074}


Dispatch the S\+Equal\+Reduce function. 


\begin{DoxyParams}{Parameters}
{\em self} & The pointer to the object. \\
\hline
{\em other} & The pointer to another object to be compared. \\
\hline
{\em equal} & The equality comparator. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the result. 
\end{DoxyReturn}
\index{tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}!S\+Hash\+Reduce@{S\+Hash\+Reduce}}
\index{S\+Hash\+Reduce@{S\+Hash\+Reduce}!tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}}
\subsubsection[{\texorpdfstring{S\+Hash\+Reduce(const Object $\ast$self, S\+Hash\+Reducer hash\+\_\+reduce) const }{SHashReduce(const Object *self, SHashReducer hash_reduce) const }}]{\setlength{\rightskip}{0pt plus 5cm}void tvm\+::\+Reflection\+V\+Table\+::\+S\+Hash\+Reduce (
\begin{DoxyParamCaption}
\item[{const Object $\ast$}]{self, }
\item[{{\bf S\+Hash\+Reducer}}]{hash\+\_\+reduce}
\end{DoxyParamCaption}
) const}\hypertarget{classtvm_1_1ReflectionVTable_a8598da5b2df50186cbc4a66ffd539c23}{}\label{classtvm_1_1ReflectionVTable_a8598da5b2df50186cbc4a66ffd539c23}


Dispatch the S\+Hash\+Reduce function. 


\begin{DoxyParams}{Parameters}
{\em self} & The pointer to the object. \\
\hline
{\em hash\+\_\+reduce} & The hash reducer. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the result. 
\end{DoxyReturn}
\index{tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}!Visit\+Attrs@{Visit\+Attrs}}
\index{Visit\+Attrs@{Visit\+Attrs}!tvm\+::\+Reflection\+V\+Table@{tvm\+::\+Reflection\+V\+Table}}
\subsubsection[{\texorpdfstring{Visit\+Attrs(\+Object $\ast$self, Attr\+Visitor $\ast$visitor) const }{VisitAttrs(Object *self, AttrVisitor *visitor) const }}]{\setlength{\rightskip}{0pt plus 5cm}void tvm\+::\+Reflection\+V\+Table\+::\+Visit\+Attrs (
\begin{DoxyParamCaption}
\item[{Object $\ast$}]{self, }
\item[{{\bf Attr\+Visitor} $\ast$}]{visitor}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classtvm_1_1ReflectionVTable_a1a04983862e782c79b2d228a1e9158b9}{}\label{classtvm_1_1ReflectionVTable_a1a04983862e782c79b2d228a1e9158b9}


Dispatch the Visit\+Attrs function. 


\begin{DoxyParams}{Parameters}
{\em self} & The pointer to the object. \\
\hline
{\em visitor} & The attribute visitor. \\
\hline
\end{DoxyParams}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
include/tvm/node/\hyperlink{reflection_8h}{reflection.\+h}\end{DoxyCompactItemize}
