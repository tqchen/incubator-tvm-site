

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Submit a Pull Request &mdash; tvm 0.7.dev1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/tvm-logo-square.png"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/tvm_theme.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Git Usage Tips" href="git_howto.html" />
    <link rel="prev" title="Error Handling Guide" href="error_handling.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/tvm-logo-small.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.7.dev1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vta/index.html">VTA: Deep Learning Accelerator Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/index.html">Deploy and Integration</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Contribute to TVM</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="community.html">TVM Community Guideline</a></li>
<li class="toctree-l2"><a class="reference internal" href="code_review.html">Perform Code Reviews</a></li>
<li class="toctree-l2"><a class="reference internal" href="committer_guide.html">Committer Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="document.html">Write Document and Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="code_guide.html">Code Guide and Tips</a></li>
<li class="toctree-l2"><a class="reference internal" href="error_handling.html">Error Handling Guide</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Submit a Pull Request</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ci-environment">CI Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing">Testing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#c">C++</a></li>
<li class="toctree-l4"><a class="reference internal" href="#python">Python</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="git_howto.html">Git Usage Tips</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_process.html">Apache TVM (incubator) Release Process</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../langref/index.html">Language Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/python/index.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_links.html">Links to API References</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev/index.html">Design and Developer Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../frontend/tensorflow.html">TensorFlow Frontend</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">tvm</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Contribute to TVM</a> &raquo;</li>
        
      <li>Submit a Pull Request</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/contribute/pull_request.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="submit-a-pull-request">
<h1>Submit a Pull Request<a class="headerlink" href="#submit-a-pull-request" title="Permalink to this headline">¶</a></h1>
<p>This is a quick guide to submit a pull request, please also refer to the detailed guidelines.</p>
<ul>
<li><p>Before submit, please rebase your code on the most recent version of master, you can do it by</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre>git remote add upstream <span class="o">[</span>url to tvm repo<span class="o">]</span>
git fetch upstream
git rebase upstream/master
</pre></div>
</div>
</li>
<li><p>Make sure code style check pass by typing the following command, and all the existing test-cases pass.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">docker/bash.sh</span> <span class="pre">tvmai/ci-lint</span> <span class="pre">./tests/scripts/task_lint.sh</span></code>. (Note: You must install docker beforehand so you can run a docker image.)</p></li>
<li><p>Add test-cases to cover the new features or bugfix the patch introduces.</p></li>
<li><p>Document the code you wrote, see more at <a class="reference internal" href="document.html#doc-guide"><span class="std std-ref">Write Document and Tutorials</span></a></p></li>
<li><p>Send the pull request and fix the problems reported by automatic checks.</p></li>
<li><p>Request code reviews from other contributors and improves your patch according to feedbacks.</p>
<ul class="simple">
<li><p>To get your code reviewed quickly, we encourage you to help review others’ code so they can do the favor in return.</p></li>
<li><p>Code review is a shepherding process that helps to improve contributor’s code quality.
We should treat it proactively, to improve the code as much as possible before the review.
We highly value patches that can get in without extensive reviews.</p></li>
<li><p>The detailed guidelines and summarizes useful lessons.</p></li>
</ul>
</li>
<li><p>The patch can be merged after the reviewers approve the pull request.</p></li>
</ul>
<div class="section" id="ci-environment">
<h2>CI Environment<a class="headerlink" href="#ci-environment" title="Permalink to this headline">¶</a></h2>
<p>We use docker container to create stable CI environments
that can be deployed to multiple machines.
You can find the prebuilt images in <a class="reference external" href="https://hub.docker.com/r/tvmai/">https://hub.docker.com/r/tvmai/</a> .
Because we want a relatively stable CI environment and make use of pre-cached image,
all of the CI images are built and maintained by committers.</p>
<p>Upgrade of CI images can cause problems and need fixes to accommodate the new env.
Here is the protocol to update CI image:</p>
<ul class="simple">
<li><p>Send PR to upgrade build script in the repo
- Can be done by a contributor, the following steps need committership.</p></li>
<li><p>Build the new docker image</p></li>
<li><p>Tag the docker image with a new version and push to tvmai</p></li>
<li><p>Update the version(most of the time increase the minor version) in the Jenkinsfile, send a PR.</p></li>
<li><p>Fix any issues wrt to the new image versions in the PR.</p></li>
<li><p>Merge the PR and now we are in new version.</p></li>
<li><p>Tag the new version as the latest.</p></li>
<li><p>Periodically cleanup the old versions on local workers</p></li>
</ul>
</div>
<div class="section" id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<p>Even though we have hooks to run unit tests automatically for each pull request, It’s always recommended to run unit tests
locally beforehand to reduce reviewers’ burden and speedup review process.</p>
<div class="section" id="c">
<h3>C++<a class="headerlink" href="#c" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span class="c1"># assume you are in tvm source root</span>
<span class="nv">TVM_ROOT</span><span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>

<span class="c1"># you need to install google test first, gtest will be installed to $TVM_ROOT/lib</span>
apt-get install -y libgtest-dev
<span class="nv">CACHE_PREFIX</span><span class="o">=</span>. make -f 3rdparty/dmlc-core/scripts/packages.mk gtest

mkdir build
<span class="nb">cd</span> build
<span class="nv">GTEST_LIB</span><span class="o">=</span>$TVM_ROOT/lib cmake -DUSE_LLVM<span class="o">=</span>ON ..
make cpptest -j<span class="k">$(</span>nproc<span class="k">)</span>
<span class="k">for</span> <span class="nb">test</span> in *_test<span class="p">;</span> <span class="k">do</span>
  ./$<span class="nb">test</span>
<span class="k">done</span>
</pre></div>
</div>
</div>
<div class="section" id="python">
<h3>Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h3>
<p>Necessary dependencies:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre>pip install --user pytest Cython
</pre></div>
</div>
<p>If you want to run all tests:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span class="c1"># build tvm</span>
make

./tests/scripts/task_python_unittest.sh
</pre></div>
</div>
<p>If you want to run a single test:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span class="c1"># build tvm</span>
make

<span class="c1"># let python know where to find tvm related libraries</span>
<span class="nb">export</span> <span class="nv">PYTHONPATH</span><span class="o">=</span>python:topi/python
rm -rf python/tvm/*.pyc python/tvm/*/*.pyc python/tvm/*/*/*.pyc

<span class="nv">TVM_FFI</span><span class="o">=</span>ctypes python -m pytest -v tests/python/unittest/test_pass_storage_rewrite.py
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="git_howto.html" class="btn btn-neutral float-right" title="Git Usage Tips" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="error_handling.html" class="btn btn-neutral float-left" title="Error Handling Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Apache Software Foundation

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-75982049-2', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>