

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>tvm.relay.transform &mdash; tvm 0.7.dev1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../_static/tvm-logo-square.png"/>
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/tvm_theme.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="tvm.relay.nn" href="nn.html" />
    <link rel="prev" title="tvm.relay.image" href="image.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html">
          

          
            
            <img src="../../../_static/tvm-logo-small.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.7.dev1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../install/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../vta/index.html">VTA: Deep Learning Accelerator Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../deploy/index.html">Deploy and Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contribute/index.html">Contribute to TVM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq.html">Frequently Asked Questions</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../langref/index.html">Language Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Python API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../runtime.html">tvm.runtime</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ndarray.html">tvm.runtime.ndarray</a></li>
<li class="toctree-l2"><a class="reference internal" href="../error.html">tvm.error</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ir.html">tvm.ir</a></li>
<li class="toctree-l2"><a class="reference internal" href="../target.html">tvm.target</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tir.html">tvm.tir</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tir.html#module-tvm.tir.transform">tvm.tir.transform</a></li>
<li class="toctree-l2"><a class="reference internal" href="../te.html">tvm.te</a></li>
<li class="toctree-l2"><a class="reference internal" href="../driver.html">tvm.driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autotvm.html">tvm.autotvm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rpc.html">tvm.rpc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contrib.html">tvm.contrib</a></li>
<li class="toctree-l2"><a class="reference internal" href="../graph_runtime.html">tvm.contrib.graph_runtime</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hybrid.html">tvm.hybrid</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">tvm.relay</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="analysis.html">tvm.relay.analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="backend.html">tvm.relay.backend</a></li>
<li class="toctree-l3"><a class="reference internal" href="frontend.html">tvm.relay.frontend</a></li>
<li class="toctree-l3"><a class="reference internal" href="image.html">tvm.relay.image</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">tvm.relay.transform</a></li>
<li class="toctree-l3"><a class="reference internal" href="nn.html">tvm.relay.nn</a></li>
<li class="toctree-l3"><a class="reference internal" href="op.html">tvm.relay.op</a></li>
<li class="toctree-l3"><a class="reference internal" href="vision.html">tvm.relay.vision</a></li>
<li class="toctree-l3"><a class="reference internal" href="testing.html">tvm.relay.testing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../vta/index.html">vta</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topi.html">topi</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../api_links.html">Links to API References</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../dev/index.html">Design and Developer Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../frontend/tensorflow.html">TensorFlow Frontend</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../genindex.html">Index</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">tvm</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Python API</a> &raquo;</li>
        
          <li><a href="index.html">tvm.relay</a> &raquo;</li>
        
      <li>tvm.relay.transform</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/api/python/relay/transform.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-tvm.relay.transform">
<span id="tvm-relay-transform"></span><h1>tvm.relay.transform<a class="headerlink" href="#module-tvm.relay.transform" title="Permalink to this headline">Â¶</a></h1>
<p>The Relay IR namespace containing transformations.</p>
<p><strong>Functions</strong></p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#tvm.relay.transform.AlterOpLayout" title="tvm.relay.transform.AlterOpLayout"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AlterOpLayout</span></code></a>()</p></td>
<td><p>Alternate the layouts of operators or replace primitive operators with other expressions.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#tvm.relay.transform.AnnotateTarget" title="tvm.relay.transform.AnnotateTarget"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AnnotateTarget</span></code></a>(target)</p></td>
<td><p>Annotate ops in an experession with a provied compiler/target and then use it for codegen.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#tvm.relay.transform.BackwardFoldScaleAxis" title="tvm.relay.transform.BackwardFoldScaleAxis"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BackwardFoldScaleAxis</span></code></a>()</p></td>
<td><p>Backward fold axis scaling into weights of conv2d/dense.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#tvm.relay.transform.CanonicalizeCast" title="tvm.relay.transform.CanonicalizeCast"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CanonicalizeCast</span></code></a>()</p></td>
<td><p>Canonicalize cast expressions to make operator fusion more efficient.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#tvm.relay.transform.CanonicalizeOps" title="tvm.relay.transform.CanonicalizeOps"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CanonicalizeOps</span></code></a>()</p></td>
<td><p>Canonicalize special operators to basic operators.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#tvm.relay.transform.CombineParallelConv2D" title="tvm.relay.transform.CombineParallelConv2D"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CombineParallelConv2D</span></code></a>([min_num_branches])</p></td>
<td><p>Combine multiple conv2d operators into one.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#tvm.relay.transform.CombineParallelDense" title="tvm.relay.transform.CombineParallelDense"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CombineParallelDense</span></code></a>([min_num_branches])</p></td>
<td><p>Combine multiple dense operators into one.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#tvm.relay.transform.ConvertLayout" title="tvm.relay.transform.ConvertLayout"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ConvertLayout</span></code></a>(desired_layout)</p></td>
<td><p>Given a dest layout, this pass transforms the expr such that most of the ops input data layout is changed to the dest layout.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#tvm.relay.transform.DeadCodeElimination" title="tvm.relay.transform.DeadCodeElimination"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DeadCodeElimination</span></code></a>([inline_once])</p></td>
<td><p>Remove expressions that do not have any users (dead code).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#tvm.relay.transform.EliminateCommonSubexpr" title="tvm.relay.transform.EliminateCommonSubexpr"><code class="xref py py-obj docutils literal notranslate"><span class="pre">EliminateCommonSubexpr</span></code></a>([fskip])</p></td>
<td><p>Eliminate common subexpressions.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#tvm.relay.transform.EtaExpand" title="tvm.relay.transform.EtaExpand"><code class="xref py py-obj docutils literal notranslate"><span class="pre">EtaExpand</span></code></a>([expand_constructor,Â â¦])</p></td>
<td><p>Add abstraction over a constructor or global variable bound to a function</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#tvm.relay.transform.FastMath" title="tvm.relay.transform.FastMath"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FastMath</span></code></a>()</p></td>
<td><p>Converts the expensive non linear functions to their fast but approximate counterparts.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#tvm.relay.transform.FoldConstant" title="tvm.relay.transform.FoldConstant"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FoldConstant</span></code></a>()</p></td>
<td><p>Fold the constant expressions in a Relay program.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#tvm.relay.transform.FoldScaleAxis" title="tvm.relay.transform.FoldScaleAxis"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FoldScaleAxis</span></code></a>()</p></td>
<td><p>Fold the scaling of axis into weights of conv2d/dense.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#tvm.relay.transform.ForwardFoldScaleAxis" title="tvm.relay.transform.ForwardFoldScaleAxis"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ForwardFoldScaleAxis</span></code></a>()</p></td>
<td><p>Fold the scaling of axis into weights of conv2d/dense.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#tvm.relay.transform.FuseOps" title="tvm.relay.transform.FuseOps"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FuseOps</span></code></a>([fuse_opt_level])</p></td>
<td><p>Fuse operators in an expr to a larger operator according to some rules.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#tvm.relay.transform.InferType" title="tvm.relay.transform.InferType"><code class="xref py py-obj docutils literal notranslate"><span class="pre">InferType</span></code></a>()</p></td>
<td><p>Infer the type of an expr.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#tvm.relay.transform.Inline" title="tvm.relay.transform.Inline"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Inline</span></code></a>()</p></td>
<td><p>Perform inlining on the given Relay IR module.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#tvm.relay.transform.LambdaLift" title="tvm.relay.transform.LambdaLift"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LambdaLift</span></code></a>()</p></td>
<td><p>Lift the closure to global function.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#tvm.relay.transform.LazyGradientInit" title="tvm.relay.transform.LazyGradientInit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LazyGradientInit</span></code></a>()</p></td>
<td><p>Reduces memory usage of gradient tensors</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#tvm.relay.transform.Legalize" title="tvm.relay.transform.Legalize"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Legalize</span></code></a>([legalize_map_attr_name])</p></td>
<td><p>Legalizes an expression with another expression.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#tvm.relay.transform.MergeComposite" title="tvm.relay.transform.MergeComposite"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MergeComposite</span></code></a>(pattern_table)</p></td>
<td><p>Merge multiple operators into a single composite relay function.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#tvm.relay.transform.PartialEvaluate" title="tvm.relay.transform.PartialEvaluate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PartialEvaluate</span></code></a>()</p></td>
<td><p>Evaluate the static fragment of the code.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#tvm.relay.transform.PartitionGraph" title="tvm.relay.transform.PartitionGraph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PartitionGraph</span></code></a>()</p></td>
<td><p>Partition a Relay program into regions that can be executed on different backends.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#tvm.relay.transform.PrintIR" title="tvm.relay.transform.PrintIR"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PrintIR</span></code></a>([show_meta_data])</p></td>
<td><p>Print the IR for a module to help debugging.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#tvm.relay.transform.RemoveUnusedFunctions" title="tvm.relay.transform.RemoveUnusedFunctions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RemoveUnusedFunctions</span></code></a>([entry_functions])</p></td>
<td><p>Remove unused global relay functions in a relay module.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#tvm.relay.transform.RewriteAnnotatedOps" title="tvm.relay.transform.RewriteAnnotatedOps"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RewriteAnnotatedOps</span></code></a>(fallback_device)</p></td>
<td><p>Rewrite the annotated program where annotation operators, e.g.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#tvm.relay.transform.SimplifyInference" title="tvm.relay.transform.SimplifyInference"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SimplifyInference</span></code></a>()</p></td>
<td><p>Simplify the data-flow graph for inference phase.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#tvm.relay.transform.ToANormalForm" title="tvm.relay.transform.ToANormalForm"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ToANormalForm</span></code></a>()</p></td>
<td><p>Turn Graph Normal Form expression into A Normal Form Expression.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#tvm.relay.transform.ToCPS" title="tvm.relay.transform.ToCPS"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ToCPS</span></code></a>(expr[,Â mod])</p></td>
<td><p>Turn expression into continuation passing style(CPS).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#tvm.relay.transform.ToGraphNormalForm" title="tvm.relay.transform.ToGraphNormalForm"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ToGraphNormalForm</span></code></a>()</p></td>
<td><p>Turn a Relay program in A Normal Form into Graph Normal Form</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#tvm.relay.transform.build_config" title="tvm.relay.transform.build_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_config</span></code></a>([opt_level,Â fallback_device,Â â¦])</p></td>
<td><p>Configure the build behavior by setting config variables.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#tvm.relay.transform.function_pass" title="tvm.relay.transform.function_pass"><code class="xref py py-obj docutils literal notranslate"><span class="pre">function_pass</span></code></a>([pass_func,Â opt_level,Â name,Â â¦])</p></td>
<td><p>Decorate a function pass.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#tvm.relay.transform.gradient" title="tvm.relay.transform.gradient"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gradient</span></code></a>(expr[,Â mod,Â mode])</p></td>
<td><p>Transform the input function, returning a function that calculate the original result, paired with gradient of the input.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#tvm.relay.transform.module_pass" title="tvm.relay.transform.module_pass"><code class="xref py py-obj docutils literal notranslate"><span class="pre">module_pass</span></code></a>([pass_func,Â opt_level,Â name,Â â¦])</p></td>
<td><p>Decorate a module pass.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#tvm.relay.transform.to_cps" title="tvm.relay.transform.to_cps"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_cps</span></code></a>(func[,Â mod])</p></td>
<td><p>Turn expression into CPS expression.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#tvm.relay.transform.un_cps" title="tvm.relay.transform.un_cps"><code class="xref py py-obj docutils literal notranslate"><span class="pre">un_cps</span></code></a>(func)</p></td>
<td><p>Turn an cps function into a Function without the continuation argument.</p></td>
</tr>
</tbody>
</table>
<p><strong>Classes</strong></p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#tvm.relay.transform.ChangeBatch" title="tvm.relay.transform.ChangeBatch"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ChangeBatch</span></code></a>(data[,Â batch_size])</p></td>
<td><p>Change the batch size.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#tvm.relay.transform.FunctionPass" title="tvm.relay.transform.FunctionPass"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FunctionPass</span></code></a></p></td>
<td><p>A pass that works on each tvm.relay.Function in a module.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#tvm.relay.transform.ModulePass" title="tvm.relay.transform.ModulePass"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ModulePass</span></code></a></p></td>
<td><p>A pass that works on tvm.IRModule.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#tvm.relay.transform.Pass" title="tvm.relay.transform.Pass"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Pass</span></code></a></p></td>
<td><p>The base class of all passes.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#tvm.relay.transform.PassContext" title="tvm.relay.transform.PassContext"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PassContext</span></code></a>([opt_level,Â fallback_device,Â â¦])</p></td>
<td><p>The basis where a Relay optimization/analysis runs on.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#tvm.relay.transform.PassInfo" title="tvm.relay.transform.PassInfo"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PassInfo</span></code></a>(opt_level,Â name[,Â required])</p></td>
<td><p>The class contains the meta data required by a pass.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#tvm.relay.transform.Sequential" title="tvm.relay.transform.Sequential"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Sequential</span></code></a>([passes,Â opt_level,Â name,Â required])</p></td>
<td><p>A pass that works on a sequence of pass objects.</p></td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="tvm.relay.transform.AlterOpLayout">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">AlterOpLayout</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.AlterOpLayout" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Alternate the layouts of operators or replace primitive operators with
other expressions.
This pass can be used for computing convolution in custom layouts or
other general weight pre-transformation.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>ret</strong> â The registered pass that alters the layout of operators.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tvm.relay.Pass</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.AnnotateTarget">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">AnnotateTarget</code><span class="sig-paren">(</span><em class="sig-param">target</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.AnnotateTarget" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Annotate ops in an experession with a provied compiler/target and then
use it for codegen.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>target</strong> (<em>String</em>) â The target compiler used for codegen.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ret</strong> â The annotated pass that wrapps ops with subgraph_start and
subgraph_end.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tvm.relay.Pass</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.BackwardFoldScaleAxis">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">BackwardFoldScaleAxis</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.BackwardFoldScaleAxis" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Backward fold axis scaling into weights of conv2d/dense.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>ret</strong> â The registered pass to backward fold expressions.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tvm.relay.Pass</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is recommended to call backward_fold_scale_axis
before using forward_fold_scale_axis as backward folding targets the common
conv-&gt;bn pattern.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.CanonicalizeCast">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">CanonicalizeCast</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.CanonicalizeCast" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Canonicalize cast expressions to make operator fusion more efficient.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>ret</strong> â The registered pass that canonicalizes cast expression.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tvm.relay.Pass</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.CanonicalizeOps">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">CanonicalizeOps</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.CanonicalizeOps" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Canonicalize special operators to basic operators.
This can simplify followed analysis, e.g. expanding bias_add to
expand_dims and broadcast_add.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>ret</strong> â The registered pass performing the canonicalization.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tvm.relay.Pass</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="tvm.relay.transform.ChangeBatch">
<em class="property">class </em><code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">ChangeBatch</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">batch_size=16</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.ChangeBatch" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Change the batch size.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>Dict</em><em>[</em><em>relay.Var</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>]</em>) â A dictionary of all the params to change.
The keys are all params, and the values are which dimension hold the batch.</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) â The batch size to change to.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>pass</strong> â The pass.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#tvm.relay.transform.FunctionPass" title="tvm.relay.transform.FunctionPass">FunctionPass</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.CombineParallelConv2D">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">CombineParallelConv2D</code><span class="sig-paren">(</span><em class="sig-param">min_num_branches=3</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.CombineParallelConv2D" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Combine multiple conv2d operators into one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>min_num_branches</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) â The minimum number of required parallel branches for performing this
optimization.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ret</strong> â The registered pass that combines parallel conv2d operators.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tvm.relay.Pass</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.CombineParallelDense">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">CombineParallelDense</code><span class="sig-paren">(</span><em class="sig-param">min_num_branches=3</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.CombineParallelDense" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Combine multiple dense operators into one. For example:</p>
<p>Would become:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>min_num_branches</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) â The minimum number of required parallel branches for performing this
optimization.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ret</strong> â The registered pass that combines parallel dense operators.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tvm.relay.Pass</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.ConvertLayout">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">ConvertLayout</code><span class="sig-paren">(</span><em class="sig-param">desired_layout</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.ConvertLayout" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Given a dest layout, this pass transforms the expr such that most of the ops input data
layout is changed to the dest layout. In ideal situation, there are only 2 layout transforms,
one at the start and one at the end.</p>
<p>This pass is not a part of relay.build and is expected to be called between framework-relay
parser and relay.build call. This is very helpful for hardware backends that support/prefer only
type of data layout.</p>
<p>RFC - <a class="reference external" href="https://discuss.tvm.ai/t/layout-conversion-pass/4009">https://discuss.tvm.ai/t/layout-conversion-pass/4009</a></p>
<p>This pass uses most of the AlterOpLayout and InferCorrectLayout infrastructure. We can define
new layouts for conv2d ops for now. Most of the other operators try to adapt to their input
layout using the InferCorrectLayout infrastructure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>desired_layout</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) â The desired layout for the transformed expr.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>pass</strong> â The pass.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#tvm.relay.transform.FunctionPass" title="tvm.relay.transform.FunctionPass">FunctionPass</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.DeadCodeElimination">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">DeadCodeElimination</code><span class="sig-paren">(</span><em class="sig-param">inline_once=False</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.DeadCodeElimination" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Remove expressions that do not have any users (dead code).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>inline_once</strong> (<em>Optional</em><em>[</em><em>Bool</em><em>]</em>) â Whether to inline binding that occurs only once.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ret</strong> â The registered pass that eliminates the dead code in a Relay program.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tvm.relay.Pass</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.EliminateCommonSubexpr">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">EliminateCommonSubexpr</code><span class="sig-paren">(</span><em class="sig-param">fskip=None</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.EliminateCommonSubexpr" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Eliminate common subexpressions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fskip</strong> (<em>Callable</em>) â The callback function that decides whether an expression should be
skipped.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ret</strong> â The registered pass that eliminates common subexpressions.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tvm.relay.Pass</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.EtaExpand">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">EtaExpand</code><span class="sig-paren">(</span><em class="sig-param">expand_constructor=False</em>, <em class="sig-param">expand_global_var=False</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.EtaExpand" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Add abstraction over a constructor or global variable bound to a function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expand_constructor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) â Whether to expand constructors.</p></li>
<li><p><strong>expand_global_var</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) â Whether to expand global variables.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ret</strong> â The registered pass that eta expands an expression.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tvm.relay.Pass</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.FastMath">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">FastMath</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.FastMath" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Converts the expensive non linear functions to their fast but approximate counterparts.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>ret</strong> â The registered pass to perform fast math operations.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tvm.relay.Pass</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.FoldConstant">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">FoldConstant</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.FoldConstant" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Fold the constant expressions in a Relay program.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>ret</strong> â The registered pass for constant folding.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tvm.relay.Pass</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.FoldScaleAxis">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">FoldScaleAxis</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.FoldScaleAxis" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Fold the scaling of axis into weights of conv2d/dense. This pass will
invoke both forward and backward scale folding.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>ret</strong> â The registered pass to fold expressions.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tvm.relay.Pass</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Internally, we will call backward_fold_scale_axis before using
forward_fold_scale_axis as backward folding targets the common conv-&gt;bn
pattern.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.ForwardFoldScaleAxis">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">ForwardFoldScaleAxis</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.ForwardFoldScaleAxis" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Fold the scaling of axis into weights of conv2d/dense.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>ret</strong> â The registered pass to forward fold expressions.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tvm.relay.Pass</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is recommended to call backward_fold_scale_axis
before using forward_fold_scale_axis, as backward folding targets the
common conv-&gt;bn pattern.</p>
</div>
</dd></dl>

<dl class="class">
<dt id="tvm.relay.transform.FunctionPass">
<em class="property">class </em><code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">FunctionPass</code><a class="headerlink" href="#tvm.relay.transform.FunctionPass" title="Permalink to this definition">Â¶</a></dt>
<dd><p>A pass that works on each tvm.relay.Function in a module. A function
pass class should be created through <cite>function_pass</cite>.</p>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.FuseOps">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">FuseOps</code><span class="sig-paren">(</span><em class="sig-param">fuse_opt_level=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.FuseOps" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Fuse operators in an expr to a larger operator according to some rules.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fuse_opt_level</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) â The level of fuse optimization. -1 indicates that the level will be
inferred from pass context.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ret</strong> â The registered pass for operator fusion.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tvm.relay.Pass</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.InferType">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">InferType</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.InferType" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Infer the type of an expr.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>ret</strong> â The registered type inference pass.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tvm.relay.Pass</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.Inline">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">Inline</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.Inline" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Perform inlining on the given Relay IR module. The global functions that
are marked as <cite>inline</cite> should be always inlined. A cost model will be
needed in the future to decide if it is profitable to inline the function.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>ret</strong> â The registered pass that performs inlining for a Relay IR module.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tvm.relay.Pass</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.LambdaLift">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">LambdaLift</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.LambdaLift" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Lift the closure to global function.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>ret</strong> â The registered pass that lifts the lambda function.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tvm.relay.Pass</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.LazyGradientInit">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">LazyGradientInit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.LazyGradientInit" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Reduces memory usage of gradient tensors</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>ret</strong> â A pass which delays and/or reduces memory allocation,
by lazily allocating 0 or one filled tensors.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tvm.relay.Pass</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.Legalize">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">Legalize</code><span class="sig-paren">(</span><em class="sig-param">legalize_map_attr_name='FTVMLegalize'</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.Legalize" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Legalizes an expression with another expression.
This pass can be used to replace an expr with another expr for target
dependent optimizations. For example, one expr, though semnatically
equivalent to the other, can have better performance on a target. This pass
can be used to legalize the expr in a target-dependent manner.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>legalize_map_attr_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) â The Opâs attr name which corresponds to the legalize rule function.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ret</strong> â The registered pass that rewrites an expr.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tvm.relay.Pass</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.MergeComposite">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">MergeComposite</code><span class="sig-paren">(</span><em class="sig-param">pattern_table</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.MergeComposite" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Merge multiple operators into a single composite relay function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pattern_table</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.8)"><em>tuple</em></a><em>)</em>) â A list of (pattern_name, pattern) tuples.
The order of the patterns in the list will determine the order
of priority in which they are matched.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ret</strong> â The registered pass that merges operators into a single composite
relay function.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tvm.relay.Pass</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="tvm.relay.transform.ModulePass">
<em class="property">class </em><code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">ModulePass</code><a class="headerlink" href="#tvm.relay.transform.ModulePass" title="Permalink to this definition">Â¶</a></dt>
<dd><p>A pass that works on tvm.IRModule. Users donât need to interact with
this class directly. Instead, a module pass should be created through
<cite>module_pass</cite>, because the design of the <cite>module_pass</cite> API is flexible
enough to handle the creation of a module pass in different manners. In
addition, all members of a module pass can be accessed from the base class.
The same rule applies to FunctionPass as well.</p>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.PartialEvaluate">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">PartialEvaluate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.PartialEvaluate" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Evaluate the static fragment of the code.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This transformation could be either <cite>Module -&gt; Module</cite> or <cite>Expr -&gt; Expr</cite>.
It will directly transform the input expression to a new one if the target
expression is provided. Otherwise, it will rely on the pass manager to
carry out transformation.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>ret</strong> â The registered pass that performs partial evaluation on an expression.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tvm.relay.Pass</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.PartitionGraph">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">PartitionGraph</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.PartitionGraph" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Partition a Relay program into regions that can be executed on different
backends.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>ret</strong> â The registered pass that partitions the Relay program.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tvm.relay.Pass</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="tvm.relay.transform.Pass">
<em class="property">class </em><code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">Pass</code><a class="headerlink" href="#tvm.relay.transform.Pass" title="Permalink to this definition">Â¶</a></dt>
<dd><p>The base class of all passes. All methods here are just simple wrappers
that are implemented in the backend. They are defined for users to
conveniently interact with the base class.</p>
<p><strong>Attributes</strong></p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#tvm.relay.transform.Pass.info" title="tvm.relay.transform.Pass.info"><code class="xref py py-obj docutils literal notranslate"><span class="pre">info</span></code></a></p></td>
<td><p>Get the pass meta.</p></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="tvm.relay.transform.Pass.info">
<em class="property">property </em><code class="sig-name descname">info</code><a class="headerlink" href="#tvm.relay.transform.Pass.info" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get the pass meta.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="tvm.relay.transform.PassContext">
<em class="property">class </em><code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">PassContext</code><span class="sig-paren">(</span><em class="sig-param">opt_level=2</em>, <em class="sig-param">fallback_device=cpu(0)</em>, <em class="sig-param">required_pass=None</em>, <em class="sig-param">disabled_pass=None</em>, <em class="sig-param">trace=None</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.PassContext" title="Permalink to this definition">Â¶</a></dt>
<dd><p>The basis where a Relay optimization/analysis runs on.
Each pass context contains a number of auxiliary information that is used
to help an optimization pass. Such information includes the error reporter
to record the errors of during the optimization, etc.</p>
<dl class="simple">
<dt>opt_level<span class="classifier">Optional[int]</span></dt><dd><p>The optimization level of this pass.</p>
</dd>
<dt>fallback_device<span class="classifier">Optional[Union[int, str, TVMContext]]</span></dt><dd><p>The fallback device type. It is also used as the default device for
operators that are not annotated during heterogeneous execution.</p>
</dd>
<dt>required_pass<span class="classifier">Optional[Union[List[str], Set[str], Tuple[str]]]</span></dt><dd><p>The list of passes that are required by a certain pass.</p>
</dd>
<dt>disabled_pass<span class="classifier">Optional[Union[List[str], Set[str], Tuple[str]]]</span></dt><dd><p>The list of passes that are disabled.</p>
</dd>
</dl>
<p><strong>Methods</strong></p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#tvm.relay.transform.PassContext.current" title="tvm.relay.transform.PassContext.current"><code class="xref py py-obj docutils literal notranslate"><span class="pre">current</span></code></a>()</p></td>
<td><p>Return the current pass context.</p></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="tvm.relay.transform.PassContext.current">
<em class="property">static </em><code class="sig-name descname">current</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.PassContext.current" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Return the current pass context.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="tvm.relay.transform.PassInfo">
<em class="property">class </em><code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">PassInfo</code><span class="sig-paren">(</span><em class="sig-param">opt_level</em>, <em class="sig-param">name</em>, <em class="sig-param">required=None</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.PassInfo" title="Permalink to this definition">Â¶</a></dt>
<dd><p>The class contains the meta data required by a pass. It is the
container of information needed by running an optimization or analysis.
This class can be extended by adding new members when more meta data is
needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>opt_level</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) â The optimization level of this pass.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) â The pass name.</p></li>
<li><p><strong>required</strong> (<em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) â The list of passes that are required by a certain pass.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.PrintIR">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">PrintIR</code><span class="sig-paren">(</span><em class="sig-param">show_meta_data=True</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.PrintIR" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Print the IR for a module to help debugging.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>show_meta_data</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) â A boolean flag to indicate if meta data should be printed.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ret</strong> â The registered pass that prints the module IR.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tvm.relay.Pass</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.RemoveUnusedFunctions">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">RemoveUnusedFunctions</code><span class="sig-paren">(</span><em class="sig-param">entry_functions=None</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.RemoveUnusedFunctions" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Remove unused global relay functions in a relay module.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>entry_functions</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>[</em><em>string</em><em>]</em>) â The set of entry functions to start from.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ret</strong> â The registered pass to remove unused functions.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tvm.relay.Pass</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.RewriteAnnotatedOps">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">RewriteAnnotatedOps</code><span class="sig-paren">(</span><em class="sig-param">fallback_device</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.RewriteAnnotatedOps" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Rewrite the annotated program where annotation operators, e.g.
<cite>on_deivce</cite>, mark which device an expression should be scheduled to.
This pass helps heterogeneous execution where different operators may need
to be allocated on various devices.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fallback_device</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) â The fallback device type. It is also used as the default device for
operators with no annotated device.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ret</strong> â The registered pass that rewrites an expression with annotated
<cite>on_device</cite> operators.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tvm.relay.Pass</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="tvm.relay.transform.Sequential">
<em class="property">class </em><code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">Sequential</code><span class="sig-paren">(</span><em class="sig-param">passes=None</em>, <em class="sig-param">opt_level=2</em>, <em class="sig-param">name='sequential'</em>, <em class="sig-param">required=None</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.Sequential" title="Permalink to this definition">Â¶</a></dt>
<dd><p>A pass that works on a sequence of pass objects. Multiple passes can be
executed sequentially using this class.</p>
<p>Some typical usage of the sequential pass are:
1. Users provide a list of passes for optimization.
2. Only an optimization level is provided so that the backend system has
to glob all passes at this level and below to perform the optimizations.</p>
<p>Note that users can also provide a series of passes that they donât want to
apply when running a sequential pass. Pass dependency will be resolved in
the backend as well.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>passes</strong> (<em>Optional</em><em>[</em><em>List</em><em>[</em><a class="reference internal" href="#tvm.relay.transform.Pass" title="tvm.relay.transform.Pass"><em>Pass</em></a><em>]</em><em>]</em>) â A sequence of passes candidate for optimization.</p></li>
<li><p><strong>opt_level</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>]</em>) â The optimization level of this sequential pass.</p></li>
<li><p><strong>name</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) â The name of the sequential pass.</p></li>
<li><p><strong>required</strong> (<em>Optional</em><em>[</em><em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em><em>]</em>) â The list of passes that the sequential pass is dependent on.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.SimplifyInference">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">SimplifyInference</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.SimplifyInference" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Simplify the data-flow graph for inference phase. An simplified expression
which is semantically equal to the input expression will be returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>ret</strong> â The registered pass to perform operator simplification.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tvm.relay.Pass</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.ToANormalForm">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">ToANormalForm</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.ToANormalForm" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Turn Graph Normal Form expression into A Normal Form Expression.
The scope of the root expression is the global scope.
The scope of any non root expression is the least common ancestor of all itâs scope.
Values are ordered by post-DFS order in each scope.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>ret</strong> â The registered pass that transforms an expression into A Normal Form.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Union[tvm.relay.Pass, tvm.relay.Expr]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.ToCPS">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">ToCPS</code><span class="sig-paren">(</span><em class="sig-param">expr</em>, <em class="sig-param">mod=None</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.ToCPS" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Turn expression into continuation passing style(CPS).</p>
<p>Every intermediate compute will be passed to a continuation.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>result</strong> â The registered pass that transforms an expression into CPS.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tvm.relay.Pass</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.ToGraphNormalForm">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">ToGraphNormalForm</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.ToGraphNormalForm" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Turn a Relay program in A Normal Form into Graph Normal Form</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>ret</strong> â The registered pass that transforms an expression into Graph Normal Form.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tvm.relay.Pass</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.build_config">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">build_config</code><span class="sig-paren">(</span><em class="sig-param">opt_level=2</em>, <em class="sig-param">fallback_device=cpu(0)</em>, <em class="sig-param">required_pass=None</em>, <em class="sig-param">disabled_pass=None</em>, <em class="sig-param">trace=None</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.build_config" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Configure the build behavior by setting config variables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>opt_level</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>, </em><em>optional</em>) â <p>Optimization level. The optimization pass name and level are as the
following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span class="n">OPT_PASS_LEVEL</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;SimplifyInference&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;OpFusion&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;FoldConstant&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s2">&quot;FoldScaleAxis&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;AlterOpLayout&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;CanonicalizeOps&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;CanonicalizeCast&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;EliminateCommonSubexpr&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;CombineParallelConv2D&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="s2">&quot;CombineParallelDense&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="s2">&quot;FastMath&quot;</span><span class="p">:</span> <span class="mi">4</span>
<span class="p">}</span>
</pre></div>
</div>
</p></li>
<li><p><strong>fallback_device</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, or </em><em>tvmContext</em><em>, </em><em>optional</em>) â The fallback device. It is also used as the default device for
operators without specified device during heterogeneous execution.</p></li>
<li><p><strong>required_pass</strong> (<em>set of str</em><em>, </em><em>optional</em>) â Optimization passes that are required regardless of optimization level.</p></li>
<li><p><strong>disabled_pass</strong> (<em>set of str</em><em>, </em><em>optional</em>) â Optimization passes to be disabled during optimization.</p></li>
<li><p><strong>trace</strong> (<em>Callable</em><em>[</em><em>[</em><a class="reference internal" href="../ir.html#tvm.ir.IRModule" title="tvm.ir.IRModule"><em>IRModule</em></a><em>, </em><a class="reference internal" href="#tvm.relay.transform.PassInfo" title="tvm.relay.transform.PassInfo"><em>PassInfo</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a><em>]</em>) â A tracing function for debugging or introspection.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>pass_context</strong> â The pass context for optimizations.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#tvm.relay.transform.PassContext" title="tvm.relay.transform.PassContext">PassContext</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.function_pass">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">function_pass</code><span class="sig-paren">(</span><em class="sig-param">pass_func=None</em>, <em class="sig-param">opt_level=None</em>, <em class="sig-param">name=None</em>, <em class="sig-param">required=None</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.function_pass" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Decorate a function pass.</p>
<p>This function returns a callback when pass_func
is provided. Otherwise, it returns the created function pass using the
given optimization function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pass_func</strong> (<em>Optional</em><em>[</em><em>Callable</em><em>[</em><em>(</em><a class="reference internal" href="index.html#tvm.relay.Function" title="tvm.relay.Function"><em>Function</em></a><em>, </em><a class="reference internal" href="../runtime.html#tvm.runtime.Module" title="tvm.runtime.Module"><em>Module</em></a><em>, </em><a class="reference internal" href="#tvm.relay.transform.PassContext" title="tvm.relay.transform.PassContext"><em>PassContext</em></a><em>) </em><em>-&gt; Function</em><em>]</em><em>]</em>) â The transformation function or class.</p></li>
<li><p><strong>opt_level</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) â The optimization level of this module pass.</p></li>
<li><p><strong>name</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) â The name of the function pass. The name could be empty. In this case, the
name of the optimization function will be used as the pass name.</p></li>
<li><p><strong>required</strong> (<em>Optional</em><em>[</em><em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em><em>]</em>) â The list of passes that the module pass is dependent on.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>create_function_pass</strong> â A decorator will be returned if pass_func is not provided,
otherwise return the decorated result.
The returned decorator has two behaviors depending on the input:
A new FunctionPass will be returned when we decorate a pass function.
A new FunctionPass class will be returned when we decorate a class type.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Union[Callable, <a class="reference internal" href="#tvm.relay.transform.FunctionPass" title="tvm.relay.transform.FunctionPass">FunctionPass</a>]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>The following code block decorates a function pass class.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span class="nd">@relay.transform.function_pass</span><span class="p">(</span><span class="n">opt_level</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">TestReplaceFunc</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_func</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">new_func</span> <span class="o">=</span> <span class="n">new_func</span>

    <span class="k">def</span> <span class="nf">transform_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">mod</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="c1"># just for demo purposes</span>
        <span class="c1"># transform func to new_func</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_func</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">relay</span><span class="o">.</span><span class="n">var</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span>
<span class="n">f1</span> <span class="o">=</span> <span class="n">relay</span><span class="o">.</span><span class="n">Function</span><span class="p">([</span><span class="n">x</span><span class="p">],</span> <span class="n">x</span><span class="p">)</span>
<span class="n">f2</span> <span class="o">=</span> <span class="n">relay</span><span class="o">.</span><span class="n">Function</span><span class="p">([</span><span class="n">x</span><span class="p">],</span> <span class="n">relay</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="c1"># fpass is now a special pass that replaces every</span>
<span class="c1"># function to f1</span>
<span class="n">fpass</span> <span class="o">=</span> <span class="n">TestReplaceFunc</span><span class="p">(</span><span class="n">f1</span><span class="p">)</span>
<span class="c1"># now every function in input_mod is replaced by f1</span>
<span class="n">res_mod</span> <span class="o">=</span> <span class="n">fpass</span><span class="p">(</span><span class="n">input_mod</span><span class="p">)</span>
</pre></div>
</div>
<p>The following code creates a function pass by decorating
a user defined transform function.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span class="nd">@relay.transform.function_pass</span><span class="p">(</span><span class="n">opt_level</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">mod</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="c1"># my transformations here.</span>
    <span class="k">return</span> <span class="n">func</span>

<span class="n">function_pass</span> <span class="o">=</span> <span class="n">transform</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">function_pass</span><span class="p">,</span> <span class="n">transform</span><span class="o">.</span><span class="n">FunctionPass</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">function_pass</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">opt_level</span> <span class="o">==</span> <span class="mi">2</span>

<span class="c1"># Given a module m, the optimization could be invoked as the follwoing:</span>
<span class="n">updated_mod</span> <span class="o">=</span> <span class="n">function_pass</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="c1"># Now constant folding should have been applied to every function in</span>
<span class="c1"># the provided module m. And the updated module will be returned.</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.gradient">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">gradient</code><span class="sig-paren">(</span><em class="sig-param">expr</em>, <em class="sig-param">mod=None</em>, <em class="sig-param">mode='higher_order'</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.gradient" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Transform the input function,
returning a function that calculate the original result,
paired with gradient of the input.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expr</strong> (<em>tvm.relay.Expr</em>) â The input expression, which is a Function or a GlobalVar.</p></li>
<li><p><strong>mod</strong> (<em>Optional</em><em>[</em><em>tvm.IRModule</em><em>]</em>) â </p></li>
<li><p><strong>mode</strong> (<em>Optional</em><em>[</em><em>String</em><em>]</em>) â The mode of the automatic differentiation algorithm.
âfirst_orderâ only works on first order code, but will not produce
reference nor closure.
âhigher_orderâ works on all code using reference and closure.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>expr</strong> â The transformed expression.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tvm.relay.Expr</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.module_pass">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">module_pass</code><span class="sig-paren">(</span><em class="sig-param">pass_func=None</em>, <em class="sig-param">opt_level=None</em>, <em class="sig-param">name=None</em>, <em class="sig-param">required=None</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.module_pass" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Decorate a module pass.</p>
<p>This function returns a callback when pass_func is provided.
Otherwise, it serves a decorator function.</p>
<p>pass_func can also be a class type with a method transform_module.
This function will create a decorated ModulePass using transform_module
as the pass function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pass_func</strong> (<em>Optional</em><em>[</em><em>Callable</em><em>[</em><em>(</em><a class="reference internal" href="../runtime.html#tvm.runtime.Module" title="tvm.runtime.Module"><em>Module</em></a><em>, </em><a class="reference internal" href="#tvm.relay.transform.PassContext" title="tvm.relay.transform.PassContext"><em>PassContext</em></a><em>) </em><em>-&gt;Module</em><em>]</em><em>]</em>) â The transformation function or class.</p></li>
<li><p><strong>opt_level</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) â The optimization level of this module pass.</p></li>
<li><p><strong>name</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) â The name of the module pass. The name could be empty. In this case, the
name of the optimization function will be used as the pass name.</p></li>
<li><p><strong>required</strong> (<em>Optional</em><em>[</em><em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em><em>]</em>) â The list of passes that the module pass is dependent on.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>create_module_pass</strong> â A decorator will be returned if pass_func is not provided,
otherwise return the decorated result.
The returned decorator has two behaviors depending on the input:
A new ModulePass will be returned when we decorate a pass function.
A new ModulePass class will be returned when we decorate a class type.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Union[Callable, <a class="reference internal" href="#tvm.relay.transform.ModulePass" title="tvm.relay.transform.ModulePass">ModulePass</a>]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>The following code block decorates a module pass class.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span class="nd">@relay.transform.module_pass</span>
<span class="k">class</span> <span class="nc">CustomPipeline</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enable_fold</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enable_fold</span> <span class="o">=</span> <span class="n">enable_fold</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cse</span> <span class="o">=</span> <span class="n">relay</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">EliminateCommonSubexpr</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">const_fold</span> <span class="o">=</span> <span class="n">relay</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">FoldConstant</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">transform_module</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">mod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cse</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">ctx</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enable_fold</span><span class="p">:</span>
            <span class="n">mod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">const_fold</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">ctx</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mod</span>

<span class="c1"># create an instance of customized pipeline</span>
<span class="n">pipeline</span> <span class="o">=</span> <span class="n">CustomPipeline</span><span class="p">(</span><span class="n">enable_fold</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pipeline</span><span class="p">,</span> <span class="n">transform</span><span class="o">.</span><span class="n">ModulePass</span><span class="p">)</span>
<span class="c1"># run the pipeline.</span>
<span class="n">output_module</span> <span class="o">=</span> <span class="n">pipeline</span><span class="p">(</span><span class="n">input_module</span><span class="p">)</span>
</pre></div>
</div>
<p>The following code creates a module pass by decorating
a user defined transform function.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span class="nd">@relay.transform.module_pass</span><span class="p">(</span><span class="n">opt_level</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="n">tp</span> <span class="o">=</span> <span class="n">relay</span><span class="o">.</span><span class="n">TensorType</span><span class="p">((</span><span class="mi">10</span><span class="p">,),</span> <span class="s2">&quot;float32&quot;</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">relay</span><span class="o">.</span><span class="n">var</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">tp</span><span class="p">)</span>
    <span class="n">gv</span> <span class="o">=</span> <span class="n">relay</span><span class="o">.</span><span class="n">GlobalVar</span><span class="p">(</span><span class="s2">&quot;var&quot;</span><span class="p">)</span>
    <span class="n">func</span> <span class="o">=</span> <span class="n">relay</span><span class="o">.</span><span class="n">Function</span><span class="p">([</span><span class="n">x</span><span class="p">],</span> <span class="n">relay</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
    <span class="n">new_mod</span> <span class="o">=</span> <span class="n">tvm</span><span class="o">.</span><span class="n">IRModule</span><span class="p">({</span><span class="n">gv</span><span class="p">:</span> <span class="n">func</span><span class="p">})</span>
    <span class="n">new_mod</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">mod</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">new_mod</span>

<span class="n">module_pass</span> <span class="o">=</span> <span class="n">transform</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">module_pass</span><span class="p">,</span> <span class="n">transform</span><span class="o">.</span><span class="n">ModulePass</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">module_pass</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">opt_level</span> <span class="o">==</span> <span class="mi">2</span>

<span class="c1"># Given a module m, the optimization could be invoked as the follwoing:</span>
<span class="n">updated_mod</span> <span class="o">=</span> <span class="n">module_pass</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="c1"># Now a function abs should be added to the module m.</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.to_cps">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">to_cps</code><span class="sig-paren">(</span><em class="sig-param">func</em>, <em class="sig-param">mod=None</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.to_cps" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Turn expression into CPS expression.</p>
<p>Every intermediate compute will be passed to a continuation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<a class="reference internal" href="index.html#tvm.relay.Function" title="tvm.relay.Function"><em>tvm.relay.Function</em></a>) â The input function.</p></li>
<li><p><strong>mod</strong> (<em>Optional</em><em>[</em><em>tvm.IRModule</em><em>]</em>) â The global module.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>result</strong> â The output function.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="index.html#tvm.relay.Function" title="tvm.relay.Function">tvm.relay.Function</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.transform.un_cps">
<code class="sig-prename descclassname">tvm.relay.transform.</code><code class="sig-name descname">un_cps</code><span class="sig-paren">(</span><em class="sig-param">func</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.transform.un_cps" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Turn an cps function into a Function without the continuation argument.</p>
<dl class="simple">
<dt>Note that this will not give the exact same interface as before cps:</dt><dd><p>If the input/output is higher order, they will still be in cps form.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>func</strong> (<a class="reference internal" href="index.html#tvm.relay.Function" title="tvm.relay.Function"><em>tvm.relay.Function</em></a>) â The input function</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>result</strong> â The output function</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="index.html#tvm.relay.Function" title="tvm.relay.Function">tvm.relay.Function</a></p>
</dd>
</dl>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="nn.html" class="btn btn-neutral float-right" title="tvm.relay.nn" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="image.html" class="btn btn-neutral float-left" title="tvm.relay.image" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Apache Software Foundation

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-75982049-2', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>